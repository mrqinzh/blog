(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-10a576e8"],{1858:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"animate__animated animate__fadeIn"},[a("el-container",[a("el-header",[a("el-input",{staticStyle:{width:"400px","margin-left":"10px"},attrs:{maxlength:25,placeholder:"请输入标题...","show-word-limit":""},model:{value:t.article.articleTitle,callback:function(e){t.$set(t.article,"articleTitle",e)},expression:"article.articleTitle"}}),a("span",{staticStyle:{"margin-left":"10px","font-size":"17px"}},[t._v("选择文章标签：")]),t._l(t.dynamicTags,(function(e){return a("el-tag",{key:e,staticStyle:{"margin-left":"10px"},attrs:{closable:"","disable-transitions":!1},on:{close:function(a){return t.handleClose(e)}}},[t._v(" "+t._s(e)+" ")])})),t.inputVisible?a("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"small"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.handleInputConfirm(e)}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}):a("el-button",{staticClass:"button-new-tag",attrs:{type:"primary",size:"small"},on:{click:t.showInput}},[t._v("+Tag")]),a("span",{staticStyle:{"margin-left":"10px","font-size":"17px"}},[t._v("选择文章类型：")]),a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.article.articleType,callback:function(e){t.$set(t.article,"articleType",e)},expression:"article.articleType"}},[a("el-option",{attrs:{value:"原创"}},[t._v("原创")]),a("el-option",{attrs:{value:"转载"}},[t._v("转载")])],1),a("div",{staticStyle:{float:"right",position:"relative"}},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.saveBlog()}}},[t._v("保存发布")])],1)],2),a("el-main",[a("div",{staticClass:"markdown_body"},[a("mavon-editor",{ref:"md",staticStyle:{"min-height":"700px"},attrs:{ishljs:!0},on:{save:t.saveSubmit,change:t.change,imgAdd:t.uploadImg,imgDel:t.imgDel},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}})],1)])],1)],1)},n=[],l=(a("e18c"),a("1c2e"),a("77ad"),a("ea69"),a("e35a"),a("0d7a"),a("bd49")),c=(a("ec8a"),a("85e0"),a("08ba"),a("6e6d")),r=a("ba96"),s=a.n(r);a("456f");c["default"].directive("highlight",(function(t){var e=t.querySelectorAll("pre code");e.forEach((function(t){s.a.highlightBlock(t)}))}));var o=a("b775");function u(t){return Object(o["a"])({method:"post",url:"/file/qiniu",data:t,headers:{"Content-Type":"multipart/form-data"}})}var d=a("2423"),h={name:"ArticleAdd",components:{mavonEditor:l["mavonEditor"]},data:function(){return{content:"",html:"",article:{articleTitle:"",articleType:""},dynamicTags:["java"],inputVisible:!1,inputValue:"",aid:""}},methods:{change:function(t,e){this.html=e,this.content=t},saveBlog:function(){var t=this;if(""!==this.article.articleTitle&&""!==this.content)if(this.aid){var e={id:this.aid,articleTitle:this.article.articleTitle,articleContentMd:this.content,articleSummary:this.html,articleTag:this.dynamicTags.toString(),articleType:this.article.articleType};console.log("update"),Object(d["e"])(e).then((function(e){e.success?(t.$message.success("恭喜恭喜，保存成功了。 => ^_^"),t.$notify({title:"通知",dangerouslyUseHTMLString:!0,duration:0,message:'<strong>更新成功了，快去看看把<a href="/" target="_blank">点击前往</a></strong>'})):t.$message.warning("保存失败")}))}else{var a={articleTitle:this.article.articleTitle,articleContentMd:this.content,articleSummary:this.html,articleTag:this.dynamicTags.toString(),articleType:this.article.articleType};console.log("add"),Object(d["a"])(a).then((function(e){e.success?(t.$message.success("恭喜恭喜，保存成功了。 => ^_^"),t.$notify({title:"通知",dangerouslyUseHTMLString:!0,duration:0,message:'<strong>有新文章添加了，快去看看把<a href="/" target="_blank">点击前往</a></strong>'})):t.$message.warning("保存失败")}))}else this.$message.warning("标题和内容均不能为空哦，不然还有什么保存的意义！ ！！")},saveSubmit:function(t,e){this.saveBlog()},uploadImg:function(t,e){var a=this,i=new FormData;i.append("file",e),u(i).then((function(e){e.success&&a.$refs.md.$img2Url(t,e.data)}))},imgDel:function(t){var e=t[0].slice(37);console.log(e)},handleClose:function(t){this.dynamicTags.splice(this.dynamicTags.indexOf(t),1)},showInput:function(){var t=this,e=this.dynamicTags;e.length>3?this.$message.warning("最多添加四个标签。。"):(this.inputVisible=!0,this.$nextTick((function(e){t.$refs.saveTagInput.$refs.input.focus()})))},handleInputConfirm:function(){var t=this.inputValue;t&&this.dynamicTags.push(t),this.inputVisible=!1,this.inputValue=""},initUpdateData:function(){var t=this;Object(d["c"])(this.aid).then((function(e){t.article.articleTitle=e.data.articleTitle,t.article.articleType=e.data.articleType,t.dynamicTags=e.data.articleTag.split(","),t.content=e.data.articleContentMd}))}},mounted:function(){this.aid=this.$route.params.articleId,this.aid&&this.initUpdateData()}},p=h,m=(a("1bd5"),a("cba8")),f=Object(m["a"])(p,i,n,!1,null,null,null);e["default"]=f.exports},"1bd5":function(t,e,a){"use strict";a("eea2")},2423:function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"e",(function(){return l})),a.d(e,"a",(function(){return c})),a.d(e,"c",(function(){return r})),a.d(e,"d",(function(){return s}));a("b4fb");var i=a("b775");function n(t){return Object(i["a"])({url:"/article/".concat(t),method:"delete"})}function l(t){return Object(i["a"])({url:"/article/update",method:"post",data:t})}function c(t){return Object(i["a"])({url:"/article/add",method:"post",data:t})}function r(t){var e="/article/".concat(t);return Object(i["a"])({url:e,method:"get"})}function s(t,e,a){var n="/article/list?currentPage=".concat(t,"&pageSize=").concat(e,"&condition=").concat(a);return Object(i["a"])({url:n,method:"get"})}},eea2:function(t,e,a){}}]);